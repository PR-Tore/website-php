#Protect Directory
AuthName "Geschützter Bereich"
AuthType Basic
AuthUserFile /var/www/web22682943/html/staging/.htpasswd
Require valid-user

AddDefaultCharset UTF-8
Options +FollowSymLinks
DirectoryIndex index.php

# Fehlerseiten
ErrorDocument 401 /404.php
ErrorDocument 403 /404.php
ErrorDocument 404 /404.php
ErrorDocument 410 /404.php

# Rewrite für saubere URLs
RewriteEngine On

# Statische Dateien und echte Dateien ignorieren
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Alle Anfragen an index.php weiterreichen
RewriteRule ^ index.php [QSA,L]

# Optional: HTTPS erzwingen und www entfernen
#RewriteCond %{HTTPS} !=on [OR]
#RewriteCond %{HTTP_HOST} ^www\.pr-tore\.de$ [NC]
#RewriteRule ^(.*)$ https://pr-tore.de/$1 [R=301,L]

# Performance: Caching-Header
<IfModule mod_expires.c>
ExpiresActive On
ExpiresByType text/css "access plus 1 year"
ExpiresByType text/javascript "access plus 1 month"
ExpiresByType application/javascript "access plus 1 month"
ExpiresByType application/x-javascript "access plus 1 month"
ExpiresByType image/svg+xml "access plus 1 month"
ExpiresByType image/gif "access plus 1 month"
ExpiresByType image/jpeg "access plus 1 month"
ExpiresByType image/png "access plus 1 month"
ExpiresByType image/svg "access plus 1 month"
ExpiresByType image/x-icon "access plus 1 year"
ExpiresByType font/woff "access plus 1 year"
ExpiresByType font/woff2 "access plus 1 year"
</IfModule>

# Performance: GZIP-Komprimierung
<IfModule mod_deflate.c>
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/shtml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript
AddOutputFilterByType DEFLATE image/svg+xml
</IfModule>

<IfModule mod_headers.c>
Header set Connection keep-alive
</IfModule>
